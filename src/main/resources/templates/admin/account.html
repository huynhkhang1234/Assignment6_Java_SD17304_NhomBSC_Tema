<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Insert title here</title>
<!-- link css -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<!-- Link To Favicon -->
<link rel="shortcut icon" href="/images/favicon.svg"
	type="image/svg+xml">

<!-- Link To Style CSS -->
<link rel="stylesheet" type="text/css" href="/css/style_MAN.css">

<!-- Link To Bootstrap CSS -->
<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">

<!-- Link To Account CSS -->
<link rel="stylesheet" href="../css/Account_MAN.css">

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
<style type="text/css">
.text-danger {
	font-size: 15px;
}
</style>
</head>
<body>
	<!-- Start Header -->
	<div th:insert="~{/admin/component/_header.html}"></div>
	<!-- End Header -->

	<main style="grid-template-columns: 16rem auto 0;">
		<!-- Start Menu Aside -->
		<div th:insert="~{/admin/component/_menu.html}"></div>

		<!-- End Menu Aside -->

		<section class="middle">

			<!--from-->
			<form class="above" action="/account/create" method="POST"
				modelAttribute="users" enctype="multipart/form-data">
				<div class="px-4 p-3">
					<div class="row">
						<div class="col-5">
							<button class="btn btn-info text-white">Thêm mới</button>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-12">
						<img src="" alt="">
					</div>
					<!--row1-->
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">ID</label>
						</div>
						<div class="col-auto">
							<input name="id" value="${users.id}" class="form-control"
								readonly />
						</div>
					</div>
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Tên tài khoản</label>
						</div>
						<div class="col-auto">
							<input class="form-control" />


						</div>
					</div>
					<div class="col-3">

						<div class="row g-2">
							<div class="col-md">
								<div class="col-auto">
									<label class="col-form-label">Tên</label>
								</div>
								<div class="col-auto">
									<input class="form-control" /> <br>

								</div>

							</div>
							<div class="col-md">
								<div class="col-auto">
									<label class="col-form-label">Họ</label>
								</div>
								<div class="col-auto">
									<input class="form-control" /> <br>

								</div>

							</div>
						</div>


					</div>

					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Email</label>

						</div>
						<div class="col-auto">
							<input class="form-control" />


						</div>
					</div>
					<!--row2-->
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Mật khẩu</label>

						</div>
						<div class="col-auto">
							<input path="pass_words" class="form-control" />

						</div>
					</div>
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Số điện thoại</label>
						</div>
						<div class="col-auto">
							<input class="form-control" type="text" />

						</div>
					</div>
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Địa chỉ</label>
						</div>
						<div class="col-auto">
							<input class="form-control" />

						</div>
					</div>

					<!--row3-->
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Vai trò</label>
						</div>
						<div class="col-auto">

							<select path="roles" class="form-select"
								aria-label="Default select example">
								<option $[(users.roles.id)]== 1 ? 'selected':'' } value="1">Quản
									lý</option>
								<option $[[users.roles.id]]== 3 ? 'selected':'' } value="3">Nhân
									viên</option>
								<option $[[users.roles.id]]== 2 ? 'selected':'' } value="2">Người
									dùng</option>
							</select>


						</div>

					</div>

					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Ngày tạo</label>
						</div>
						<div class="col-auto">
							<input value="${users.create_date}" class="form-control" readonly />

						</div>
					</div>
					<div class="col-3">
						<div class="col-auto">
							<label class="col-form-label">Ngày cập nhật</label>
						</div>
						<div class="col-auto">
							<input value="${users.update_date}" class="form-control" readonly />

						</div>
					</div>
					<div class="col-4" style="padding: 0px;">


						<div class="col-10" style="margin: 25px; width: 90%">
							<div style="width: 100%; height: 200px; border: 1px dotted gray;">
								<th:if text="*{!empty name}">
									<img alt="" src="${name}" id="img" width="100%" height="100%"
										style="object-fit: contain;">
								</th:if>
								<th:if test="${empty name}">
									<img alt="" src="/images/user-img/${users.images}" id="img"
										width="100%" height="100%" style="object-fit: contain;">
								</th:if>
							</div>
						</div>
						<!-- /.card-body -->
						<div style="margin: 25px; width: 90%; margin-top: 0px;"
							class="input-group date" id="reservationdate"
							data-target-input="nearest">

							<input name="file" id="inputGroupFile01" type="file"
								cssClass="form-control datetimepicker-input"
								placeholder="choose file" />

						</div>


					</div>

				</div>
				<!--btn-->

				<div class="btn-account">
					<div class="d-grid gap-2 d-md-flex justify-content-md-end">

						<button class="btn btn-warning"
							formaction="/account/update/${users.id}">Cập nhật</button>

					</div>
				</div>
			</form>

			<div class="below">
				<div class="table-responsive mt-5" style="overflow-x: auto">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>ID</th>
								<th>Tên tài khoản</th>
								<th>Tên</th>
								<th>Họ</th>
								<th>Email</th>
								<th>Mật khẩu</th>
								<th>Số điện thoại</th>
								<th>Địa chỉ</th>
								<th>Vai trò</th>
								<th>Tình trạng</th>
								<th>Hình ảnh</th>
								<th colspan="2">Thao Tác</th>
							</tr>
						</thead>
						<tbody>
							<div th:each="list, state: ${list}">
							<tr>

								<td th:text="${list.id}">
								<td th:text="${list.user_names}"></td>
								<td th:text="${list.first_names}"></td>
								<td th:text="${list.last_names}"></td>
								<td th:text="${list.email}"></td>
								<td th:text="${list.pass_words}"></td>
								<td th:text="${list.phones}"></td>
								<td th:text="${list.address}"></td>
								<td th:text="${list.roles.id}"></td>
								<td style="text-align: center;">
									<button type="button" class="btn btn-warning"
										data-bs-toggle="modal" data-bs-target="#modal-Close${item.id}">
										<div th:if="${list.is_active == 3}">
											<i class="fa-solid fa-lock "></i>
										</div>
										<div th:if="${list.is_active == 1}">
											<i class="bi bi-unlock-fill"></i>
										</div>
									</button>
									<div th:if="${list.is_active == 3}">

										<div class="modal fade" id="modal-Close${list.id}"
											data-bs-backdrop="static" data-bs-keyboard="false"
											tabindex="-1" aria-labelledby="staticBackdropLabel"
											aria-hidden="true">
											<div class=" modal-dialog">
												<div class="modal-content">
													<div class="modal-header">
														<h5 class="modal-title" id="staticBackdropLabel">
															Khóa tài khoản</h5>
														<button type="button" class="btn-close"
															data-bs-dismiss="modal" aria-label="Close"></button>
													</div>
													<div class="modal-body">

														<p style="font-size: 19px;">
															Bạn có muốn Mở khóa thông tin của <span
																th:text="${list.user_names}"></span>
														</p>

													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-secondary"
															data-bs-dismiss="modal">NO</button>
														<a href="/account/close/${list.id}"
															class="btn btn-primary">YES</a>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div th:if="${list.is_active == 1}">
										<div class="modal fade" id="modal-Close${list.id}"
											data-bs-backdrop="static" data-bs-keyboard="false"
											tabindex="-1" aria-labelledby="staticBackdropLabel"
											aria-hidden="true">
											<div class=" modal-dialog">
												<div class="modal-content">
													<div class="modal-header">
														<h5 class="modal-title" id="staticBackdropLabel">Mở
															Khóa tài khoản</h5>
														<button type="button" class="btn-close"
															data-bs-dismiss="modal" aria-label="Close"></button>
													</div>
													<div class="modal-body">

														<p style="font-size: 19px;">
															Bạn có muốn Khóa thông tin của<span
																th:text="${list.user_names}"></span>
														</p>

													</div>
													<div class="modal-footer">
														<button type="button" class="btn btn-secondary"
															data-bs-dismiss="modal">NO</button>
														<a href="/account/close/${list.id}"
															class="btn btn-primary">YES</a>
													</div>
												</div>
											</div>




										</div>
									</div>
								</td>
								<td th:text="${list.images}"></td>
								<td><a href="/account/edit/${list.id}"
									class="btn btn-primary"> <i class="bi bi-pencil-square"></i>
								</a>


									<button class="btn btn-danger" data-bs-toggle="modal"
										data-bs-target="#modalDelte${list.id }">
										<i class="bi bi-trash-fill"></i>
									</button> Modal delete</td>
							</tr>
							</div>

							<!-- Modal -->
							<div class="modal fade" id="modalDelte${list.id}" tabindex="-1"
								aria-labelledby="exampleModalLabel" aria-hidden="true">
								<div class="modal-dialog">
									<div class="modal-content">
										<div class="modal-header">
											<h1 class="modal-title fs-5" id="exampleModalLabel">Modal
												title</h1>
											<button type="button" class="btn-close"
												data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="modal-body">Bạn muốn Xóa Tài Khoản</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">NO</button>
											<a href="/account/delete/${list.id}" class="btn btn-primary">YES</a>
										</div>
									</div>
								</div>
							</div>
							<!-- Modal -->
							</th:each>

						</tbody>
					</table>
					<div class="d-flex justify-content-center">

						<div class="btn-toolbar" role="toolbar"
							aria-label="Toolbar with button groups">
							<div class="btn-group me-2" role="group" aria-label="First group">
								<a href="/admin/account?p=0"><button type="button"
										class="btn btn-primary">1</button></a> <a
									href="/admin/account?p=1"><button type="button"
										class="btn btn-primary">2</button></a> <a
									href="/admin/account?p=2"><button type="button"
										class="btn btn-primary">3</button></a> <a
									href="/admin/account?p=${listproduts.totalPages-1}"><button
										type="button" class="btn btn-primary">4</button></a>
							</div>
						</div>

					</div>
				</div>
			</div>

		</section>
		<!--end of middle-->

	</main>

	<!-- Link To Base JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
		crossorigin="anonymous"></script>
	<script src="/js/main_MAN.js"></script>

	<script>
    const sidebarList = document.querySelectorAll('.sidebar');
    const sidebarActive = document.querySelector('.sidebar#account');

    let img = document.getElementById('img');
    let input = document.getElementById('inputGroupFile01');
    input.onchange = (e) => {
        if (input.files[0])
            img.src = URL.createObjectURL(input.files[0]);
    } 
    
    
    sidebarList.forEach((sidebar) => {
    	sidebar.firstElementChild.classList.remove('active');
        });
    sidebarActive.firstElementChild.classList.add('active');
    </script>
</body>
</html>